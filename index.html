<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å…ƒç´ è¨˜å·ã‚¯ã‚¤ã‚º - å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ä»˜ã</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #f0f4f8;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      background: white;
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
      width: 90%;
      max-width: 500px;
      text-align: center;
    }
    h1 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }
    .symbol {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: #007bff;
    }
    input[type="text"] {
      padding: 0.5rem;
      font-size: 1rem;
      width: 80%;
      border: 1px solid #ccc;
      border-radius: 0.5rem;
      margin-bottom: 1rem;
    }
    button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      margin: 0.2rem;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
    }
    button:disabled {
      background: gray;
      cursor: default;
    }
    .feedback {
      margin-top: 1rem;
      font-weight: bold;
    }
    .correct {
      color: green;
    }
    .wrong {
      color: red;
    }
    .progress {
      background: #ddd;
      height: 10px;
      border-radius: 5px;
      overflow: hidden;
      margin: 1rem 0;
    }
    .progress-bar {
      background: #007bff;
      height: 100%;
      width: 0%;
      transition: width 0.3s;
    }
    .progress-text {
      font-size: 0.9rem;
      margin-top: -0.5rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>å…ƒç´ è¨˜å·ã‚¯ã‚¤ã‚ºï¼ˆ1ã€œ40ï¼‰</h1>
    <div id="progress" class="progress">
      <div id="progressFill" class="progress-bar"></div>
    </div>
    <div id="progressText" class="progress-text">0 / 40 å•å®Œäº†</div>
    <div class="symbol" id="symbol">H</div>
    <input type="text" id="answer" placeholder="æ—¥æœ¬èªåã‚’å…¥åŠ›" autocomplete="off">
    <br>
    <button onclick="checkAnswer()">ç­”ãˆã‚‹</button>
    <button id="reviewButton" onclick="startReview()" style="display:none;">å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã¸</button>
    <div id="feedback" class="feedback"></div>
  </div>

  <script>
    const elements = [
      {symbol: "H", name: "æ°´ç´ ", hint: "Hã¯Hydrogenã€‚æ°´ï¼ˆHâ‚‚Oï¼‰ã®å…ƒï¼"},
      {symbol: "He", name: "ãƒ˜ãƒªã‚¦ãƒ ", hint: "é¢¨èˆ¹ã«ä½¿ã†è»½ã„ã‚¬ã‚¹ï¼"},
      {symbol: "Li", name: "ãƒªãƒã‚¦ãƒ ", hint: "ãƒªãƒã‚¦ãƒ é›»æ± ã«ä½¿ã‚ã‚Œã‚‹"},
      {symbol: "Be", name: "ãƒ™ãƒªãƒªã‚¦ãƒ ", hint: "ãƒ™ãƒªãƒ¼ã£ã½ã„åå‰ã§è¦šãˆã‚ˆã†"},
      {symbol: "B", name: "ãƒ›ã‚¦ç´ ", hint: "Boron â†’ é˜²ç‚ã‚¬ãƒ©ã‚¹ã«ä½¿ã‚ã‚Œã‚‹"},
      {symbol: "C", name: "ç‚­ç´ ", hint: "Carbon â†’ ç‚­ï¼é‰›ç­†ã®èŠ¯"},
      {symbol: "N", name: "çª’ç´ ", hint: "ç©ºæ°—ã®78%ã‚’å ã‚ã‚‹"},
      {symbol: "O", name: "é…¸ç´ ", hint: "Oxygen â†’ å‘¼å¸ã«å¿…è¦ï¼"},
      {symbol: "F", name: "ãƒ•ãƒƒç´ ", hint: "ãƒ•ãƒƒç´ å…¥ã‚ŠãƒãƒŸã‚¬ã‚­ã«å…¥ã£ã¦ã‚‹ï¼"},
      {symbol: "Ne", name: "ãƒã‚ªãƒ³", hint: "ãƒã‚ªãƒ³çœ‹æ¿ã§æœ‰å"},
      {symbol: "Na", name: "ãƒŠãƒˆãƒªã‚¦ãƒ ", hint: "ãƒŠï¼Naã§ãã®ã¾ã¾ï¼"},
      {symbol: "Mg", name: "ãƒã‚°ãƒã‚·ã‚¦ãƒ ", hint: "èŠ±ç«ã§æ˜ã‚‹ãå…‰ã‚‹ï¼"},
      {symbol: "Al", name: "ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ ", hint: "Alï¼ã‚¢ãƒ«ãƒŸç¼¶ï¼"},
      {symbol: "Si", name: "ã‚±ã‚¤ç´ ", hint: "Silicon â†’ åŠå°ä½“ï¼"},
      {symbol: "P", name: "ãƒªãƒ³", hint: "Phosphorus â†’ ãƒãƒƒãƒã«ä½¿ã†"},
      {symbol: "S", name: "ç¡«é»„", hint: "æ¸©æ³‰ã®ã«ãŠã„"},
      {symbol: "Cl", name: "å¡©ç´ ", hint: "ãƒ—ãƒ¼ãƒ«ã®ã«ãŠã„ï¼"},
      {symbol: "Ar", name: "ã‚¢ãƒ«ã‚´ãƒ³", hint: "ç©ºæ°—ä¸­ã«1%ã€åå¿œã—ã«ãã„"},
      {symbol: "K", name: "ã‚«ãƒªã‚¦ãƒ ", hint: "ãƒãƒŠãƒŠã«å¤šã„æ „é¤Šç´ "},
      {symbol: "Ca", name: "ã‚«ãƒ«ã‚·ã‚¦ãƒ ", hint: "éª¨ã®æˆåˆ†ï¼"},
      {symbol: "Sc", name: "ã‚¹ã‚«ãƒ³ã‚¸ã‚¦ãƒ ", hint: "ã‚¹ã‚«ãƒ³ã‚¸ãƒŠãƒ“ã‚¢ã‹ã‚‰ç™ºè¦‹"},
      {symbol: "Ti", name: "ãƒã‚¿ãƒ³", hint: "è»½ãã¦å¼·ã„é‡‘å±"},
      {symbol: "V", name: "ãƒãƒŠã‚¸ã‚¦ãƒ ", hint: "ãƒãƒŠãƒŠã§ã¯ãªã„ï¼"},
      {symbol: "Cr", name: "ã‚¯ãƒ­ãƒ ", hint: "ãƒ¡ãƒƒã‚­ã«ä½¿ã‚ã‚Œã‚‹"},
      {symbol: "Mn", name: "ãƒãƒ³ã‚¬ãƒ³", hint: "ä¹¾é›»æ± ã®ææ–™"},
      {symbol: "Fe", name: "é‰„", hint: "ãƒ•ã‚§ãƒ³ã‚¹ï¼é‰„ã®æŸµ"},
      {symbol: "Co", name: "ã‚³ãƒãƒ«ãƒˆ", hint: "ã‚³ãƒãƒ«ãƒˆãƒ–ãƒ«ãƒ¼ã®è‰²"},
      {symbol: "Ni", name: "ãƒ‹ãƒƒã‚±ãƒ«", hint: "ã‚³ã‚¤ãƒ³ã«ä½¿ã‚ã‚Œã‚‹"},
      {symbol: "Cu", name: "éŠ…", hint: "é›»ç·šã«ä½¿ã‚ã‚Œã‚‹"},
      {symbol: "Zn", name: "äºœé‰›", hint: "ã‚µãƒ—ãƒªã‚„é‡‘å±ã«"},
      {symbol: "Ga", name: "ã‚¬ãƒªã‚¦ãƒ ", hint: "ä½æ¸©ã§æº¶ã‘ã‚‹é‡‘å±"},
      {symbol: "Ge", name: "ã‚²ãƒ«ãƒãƒ‹ã‚¦ãƒ ", hint: "åŠå°ä½“ã«ä½¿ã‚ã‚Œã‚‹"},
      {symbol: "As", name: "ãƒ’ç´ ", hint: "æ¯’ã¨ã—ã¦æœ‰å"},
      {symbol: "Se", name: "ã‚»ãƒ¬ãƒ³", hint: "ã‚«ãƒ¡ãƒ©ã‚„ã‚³ãƒ”ãƒ¼æ©Ÿã«"},
      {symbol: "Br", name: "è‡­ç´ ", hint: "ã«ãŠã„ã®å¼·ã„æ¶²ä½“"},
      {symbol: "Kr", name: "ã‚¯ãƒªãƒ—ãƒˆãƒ³", hint: "å…‰ã‚‹ã‚¬ã‚¹ï¼ˆãƒã‚ªãƒ³ã®ä»²é–“ï¼‰"},
      {symbol: "Rb", name: "ãƒ«ãƒ“ã‚¸ã‚¦ãƒ ", hint: "ç‚è‰²åå¿œã§èµ¤ç´«"},
      {symbol: "Sr", name: "ã‚¹ãƒˆãƒ­ãƒ³ãƒã‚¦ãƒ ", hint: "èŠ±ç«ã«ä½¿ã‚ã‚Œã‚‹"},
      {symbol: "Y", name: "ã‚¤ãƒƒãƒˆãƒªã‚¦ãƒ ", hint: "Yï¼ã‚¤ãƒƒãƒˆãƒªã‚¦ãƒ "},
      {symbol: "Zr", name: "ã‚¸ãƒ«ã‚³ãƒ‹ã‚¦ãƒ ", hint: "äººå·¥ãƒ€ã‚¤ãƒ¤ã®ææ–™"},
    ];

    let mode = "main"; // "main" or "review"
    let pool = [...elements];
    let current = {};
    let total = 0;
    let mistakes = [];
    let reviewIndex = 0;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    shuffle(pool);

    function nextQuestion() {
      if (mode === "main" && total >= 40) {
        document.getElementById("symbol").innerText = "ğŸ‰ çµ‚äº†ï¼";
        document.getElementById("feedback").innerHTML =
          `é–“é•ãˆãŸæ•°: ${mistakes.length}<br>`;
        if (mistakes.length > 0) {
          document.getElementById("reviewButton").style.display = "inline-block";
        }
        document.querySelector("button").disabled = true;
        return;
      }

      if (mode === "review") {
        if (reviewIndex >= mistakes.length) {
          document.getElementById("symbol").innerText = "âœ… å¾©ç¿’å®Œäº†ï¼";
          document.getElementById("feedback").innerText = "";
          document.querySelector("button").disabled = true;
          return;
        }
        current = mistakes[reviewIndex];
        reviewIndex++;
        document.getElementById("progressText").innerText = `å¾©ç¿’ ${reviewIndex} / ${mistakes.length}`;
        document.getElementById("progressFill").style.width = `${(reviewIndex / mistakes.length) * 100}%`;
      } else {
        current = pool[total];
        document.getElementById("progressText").innerText = `${total + 1} / 40 å•å®Œäº†`;
        document.getElementById("progressFill").style.width = `${((total + 1) / 40) * 100}%`;
      }

      document.getElementById("symbol").innerText = current.symbol;
      document.getElementById("answer").value = "";
      document.getElementById("feedback").innerText = "";
    }

    function checkAnswer() {
      const input = document.getElementById("answer").value.trim();
      const feedback = document.getElementById("feedback");
      if (input === current.name) {
        feedback.innerText = "æ­£è§£ï¼ğŸ¯";
        feedback.className = "feedback correct";
      } else {
        feedback.innerHTML = `ä¸æ­£è§£ã€‚æ­£è§£ã¯ã€Œ${current.name}ã€<br><small>ğŸ’¡ ${current.hint}</small>`;
        feedback.className = "feedback wrong";
        if (mode === "main") mistakes.push(current);
      }
      if (mode === "main") {
        total++;
      }
      setTimeout(nextQuestion, 2000);
    }

    function startReview() {
      if (mistakes.length === 0) return;
      mode = "review";
      reviewIndex = 0;
      document.getElementById("reviewButton").style.display = "none";
      document.querySelector("button").disabled = false;
      document.getElementById("progressFill").style.width = "0%";
      document.getElementById("progressText").innerText = `å¾©ç¿’ 0 / ${mistakes.length}`;
      nextQuestion();
    }

    nextQuestion();
  </script>
</body>
</html>
